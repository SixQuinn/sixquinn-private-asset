<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<title>ğŸ“Š Six Quinn çš„ç§äººèµ„äº§å·¥å…·</title>

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<style>
:root{
  --bg:#0f172a;
  --card:#020617;
  --border:#334155;
  --text:#e5e7eb;
  --muted:#94a3b8;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang SC",sans-serif;
  background:var(--bg);
  color:var(--text);
  font-size:18px;
}

.hidden{display:none}

/* ===== é”å± ===== */
#lock{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.lock-card{
  background:var(--card);
  padding:24px;
  border-radius:16px;
  width:90%;
  max-width:360px;
  text-align:center;
}

.lock-card h2{
  font-size:22px;
  margin-bottom:16px;
}

.lock-card input{
  width:100%;
  font-size:18px;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--text);
  margin-bottom:12px;
}

.lock-card button{
  width:100%;
  font-size:16px;
  padding:10px;
  border:none;
  border-radius:10px;
  background:#1e293b;
  color:var(--text);
}

/* ===== ä¸»ä½“ ===== */
.container{
  max-width:420px;
  margin:auto;
  padding:20px 16px 48px;
}

h1{
  font-size:24px;
  margin-bottom:16px;
}

.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
}

.card h2{
  font-size:20px;
  margin-bottom:12px;
}

/* æ€»èµ„äº§ */
.total{
  font-size:28px;
  font-weight:600;
  margin-bottom:8px;
}

.small{
  font-size:14px;
  color:var(--muted);
}

/* è¡Œ */
.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:10px 0;
  font-size:18px;
}

.row input{
  width:120px;
  font-size:16px;
  padding:6px 8px;
  background:#020617;
  border:1px solid var(--border);
  border-radius:8px;
  color:var(--text);
}

button{
  background:#1e293b;
  border:none;
  color:var(--text);
  border-radius:8px;
  padding:6px 10px;
  cursor:pointer;
}

.tag-btn{
  font-size:14px;
  margin-left:6px;
}

canvas{
  background:#020617;
  border-radius:16px;
  margin-top:12px;
}
</style>
</head>

<body>

<div id="lock">
  <div class="lock-card">
    <h2>ğŸ”’ Six Quinn çš„ç§äººèµ„äº§å·¥å…·</h2>
    <input id="pin" type="password" placeholder="è¾“å…¥ PIN">
    <button onclick="unlock()">è§£é”</button>
  </div>
</div>

<div id="app" class="container hidden">
  <h1>ğŸ“Š Six Quinn çš„ç§äººèµ„äº§å·¥å…·</h1>

  <div class="card">
    <div class="total" id="totalAsset">ï¿¥0</div>
    <div class="small">æ€»èµ„äº§ï¼ˆä¸å«å…¬ç§¯é‡‘ & å…¬å¸è‚¡ç¥¨ï¼‰</div>
  </div>

  <div class="card">
    <h2>ğŸ’° èµ„äº§ç»“æ„</h2>
    <div id="assets"></div>
    <button onclick="addCustomAsset()">ï¼‹ æ–°å¢è‡ªå®šä¹‰èµ„äº§</button>
    <button class="tag-btn" onclick="toggleChartMode()">ğŸ“Š åˆ‡æ¢è§†å›¾</button>
    <canvas id="assetChart" width="350" height="350"></canvas>
  </div>

  <div class="card">
    <h2>ğŸ§  èµ„äº§ç»“æ„å»ºè®®</h2>
    <div id="advice" class="small"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const PIN_KEY="SQ_PIN";
let chartMode="group";
let assetChart;

const FIXED_ASSETS=[
 {name:"æ”¯ä»˜å®",value:0,fixed:true},
 {name:"äº‘é—ªä»˜",value:0,fixed:true},
 {name:"ç¾å…ƒå¤–æ±‡",value:0,fixed:true},
 {name:"å¹³å®‰è¯åˆ¸",value:0,fixed:true},
 {name:"ä¸œæ–¹è´¢å¯Œ",value:0,fixed:true},
 {name:"å…¬ç§¯é‡‘",value:0,fixed:true},
 {name:"å…¬å¸è‚¡ç¥¨",value:0,fixed:true}
];

let assets=JSON.parse(localStorage.getItem("assets"))||FIXED_ASSETS.slice();

function unlock(){
 const v=pin.value;
 if(!localStorage.getItem(PIN_KEY)) localStorage.setItem(PIN_KEY,v);
 if(v===localStorage.getItem(PIN_KEY)){
   lock.classList.add("hidden");
   app.classList.remove("hidden");
   renderAll();
 }
}

function save(){
 localStorage.setItem("assets",JSON.stringify(assets));
 renderAll();
}

function addCustomAsset(){
 const name=prompt("èµ„äº§åç§°");
 if(name){
   assets.push({name:name.trim(),value:0,fixed:false,countInStock:false});
   save();
 }
}

function setVal(i,v){
 assets[i].value=parseFloat(v)||0;
 save();
}

function renderAssets(){
 assetsDiv.innerHTML=assets.map((a,i)=>`
  <div class="row">
    <span>${a.name}</span>
    <input type="number" value="${a.value}" oninput="setVal(${i},this.value)">
  </div>
 `).join("");
}

function renderTotal(){
 const total=assets
   .filter(a=>!["å…¬ç§¯é‡‘","å…¬å¸è‚¡ç¥¨"].includes(a.name))
   .reduce((s,a)=>s+a.value,0);
 totalAsset.innerText="ï¿¥"+total.toLocaleString();
}

function renderAdvice(){
 const total=assets.reduce((s,a)=>s+a.value,0);
 const stock=assets
   .filter(a=>["å¹³å®‰è¯åˆ¸","ä¸œæ–¹è´¢å¯Œ"].includes(a.name))
   .reduce((s,a)=>s+a.value,0);

 let advice="ç»“æ„ç¨³å¥ã€‚";
 if(total){
   const p=stock/total;
   if(p>0.5) advice="è‚¡ç¥¨å æ¯”è¿‡é«˜ï¼Œé£é™©æš´éœ²æ˜æ˜¾ã€‚";
   else if(p>0.3) advice="è‚¡ç¥¨å æ¯”è¾ƒé«˜ï¼Œéœ€å…³æ³¨æ³¢åŠ¨ã€‚";
 }
 adviceDiv.innerText=advice;
}

function toggleChartMode(){
 chartMode=chartMode==="group"?"detail":"group";
 renderChart();
}

function renderChart(){
 if(assetChart) assetChart.destroy();
 let labels=[],data=[];
 assets.forEach(a=>{
   if(a.value>0){labels.push(a.name);data.push(a.value);}
 });
 assetChart=new Chart(assetChartEl,{
   type:"pie",
   data:{labels,datasets:[{data}]},
   options:{plugins:{legend:{position:"bottom",labels:{color:"#e5e7eb"}}}}
 });
}

function renderAll(){
 renderTotal();
 renderAssets();
 renderAdvice();
 renderChart();
}

const assetsDiv=document.getElementById("assets");
const adviceDiv=document.getElementById("advice");
const assetChartEl=document.getElementById("assetChart");
const totalAsset=document.getElementById("totalAsset");
</script>
</body>
</html>
